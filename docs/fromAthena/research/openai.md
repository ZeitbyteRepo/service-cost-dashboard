# OpenAI API Research

## Key Status
- Env var: `OPENAI_API_KEY`
- Permissions: API key with usage scopes (may need scope fix per brief)
- Tested: Key exists but may need scope adjustment

## Available Endpoints

Base URL: `https://api.openai.com/v1`

### Usage & Billing Endpoints (Admin API)
- `GET /organization/usage/completions` - Chat completion usage
- `GET /organization/usage/embeddings` - Embedding usage
- `GET /organization/usage/images` - Image generation usage
- `GET /organization/usage/audio_speeches` - TTS usage
- `GET /organization/usage/audio_transcriptions` - Whisper usage
- `GET /organization/usage/code_interpreter_sessions` - Code interpreter
- `GET /organization/usage/vector_stores` - Vector store usage
- `GET /organization/costs` - Aggregated costs

### Core API Endpoints
- `POST /chat/completions` - Chat completions
- `POST /completions` - Legacy completions
- `POST /embeddings` - Text embeddings
- `POST /images/generations` - Image generation
- `POST /audio/speech` - Text-to-speech
- `POST /audio/transcriptions` - Speech-to-text
- `POST /audio/translations` - Audio translation

## Cost Drivers

1. **Input Tokens** - Tokens sent to model (prompt)
2. **Output Tokens** - Tokens generated by model (completion)
3. **Audio Duration** - Seconds of audio processed
4. **Image Count & Resolution** - Number and size of images
5. **Fine-tuning** - Training compute costs
6. **Vector Storage** - Storage for assistants

### Pricing by Model (per 1M tokens)
| Model | Input | Output |
|-------|-------|--------|
| GPT-4o | $2.50 | $10.00 |
| GPT-4o-mini | $0.15 | $0.60 |
| GPT-4 Turbo | $10.00 | $30.00 |
| GPT-3.5 Turbo | $0.50 | $1.50 |
| o1 | $15.00 | $60.00 |
| o1-mini | $1.10 | $4.40 |

### Image Pricing
- 1024x1024: ~$0.04/image
- 512x512: ~$0.02/image

## Card Proposal (Dashboard)

### Primary Metric
- **Monthly Token Cost** - Total spend on tokens

### Secondary Metrics
- **Input Tokens** - Total prompts this month
- **Output Tokens** - Total completions this month
- **API Calls** - Request count
- **Active Models** - Which models used

### Uptime Indicator
- Yes - Status page at `https://status.openai.com`
- Can also check via API health endpoint

## Sub-Page Proposal (Detail View)

### Section 1: Usage by Model
- Token breakdown per model
- Cost per model
- Request count per model

### Section 2: Usage Trends
- Daily token consumption
- Input/output ratio
- Peak usage times

### Section 3: Feature Breakdown
- Chat vs Embeddings vs Images
- Audio usage (TTS/STT)
- Fine-tuning costs

### Section 4: Rate Limits
- Current tier limits
- Usage against limits
- Rate limit warnings

### Object Lists
- Models (list available models)
- Files (uploaded files)
- Fine-tuning jobs
- Assistants
- Vector stores
- Batches

## Sample API Response

```json
GET /organization/usage/completions?start_time=2026-02-01

{
  "data": [
    {
      "object": "usage.completion",
      "model": "gpt-4o",
      "input_tokens": 1500000,
      "output_tokens": 500000,
      "num_requests": 1250,
      "timestamp": "2026-02-15"
    }
  ]
}
```

## Notes
- Admin API requires organization access
- Usage endpoints need proper scopes
- Free tier has limited rate limits
- Batch API offers 50% discount
